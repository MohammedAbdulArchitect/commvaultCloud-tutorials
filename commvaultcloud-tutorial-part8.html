<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Commvault Software Administration ‚Äì Tutorial 8 | Cloud Backup Mastery</title>
<style>
  :root {
    --navy: #0a1628;
    --navy-mid: #0f2040;
    --navy-light: #162b52;
    --accent: #00c8ff;
    --accent2: #00e5a0;
    --accent3: #ff6b35;
    --accent4: #a78bfa;
    --gold: #f5c842;
    --text: #e2e8f0;
    --text-muted: #94a3b8;
    --text-dim: #64748b;
    --card: #0d1f3c;
    --card-border: rgba(0,200,255,0.12);
    --warn-bg: rgba(255,107,53,0.08);
    --warn-border: #ff6b35;
    --tip-bg: rgba(0,229,160,0.08);
    --tip-border: #00e5a0;
    --note-bg: rgba(0,200,255,0.08);
    --note-border: #00c8ff;
    --exam-bg: rgba(167,139,250,0.08);
    --exam-border: #a78bfa;
    --best-bg: rgba(245,200,66,0.08);
    --best-border: #f5c842;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }

  body {
    font-family: 'Segoe UI', Calibri, 'Helvetica Neue', Arial, sans-serif;
    background: var(--navy);
    color: var(--text);
    line-height: 1.7;
    font-size: 15px;
  }

  nav {
    position: sticky; top: 0; z-index: 999;
    background: rgba(10,22,40,0.97);
    border-bottom: 1px solid var(--card-border);
    backdrop-filter: blur(12px);
    padding: 0 32px;
    display: flex; align-items: center; gap: 8px;
    flex-wrap: wrap; min-height: 54px;
  }
  .nav-brand {
    font-family: Georgia, 'Times New Roman', Cambria, serif;
    color: var(--accent); font-size: 15px; font-weight: bold;
    letter-spacing: 0.5px; margin-right: 16px; white-space: nowrap;
  }
  nav a {
    color: var(--text-muted); text-decoration: none; font-size: 12px;
    padding: 6px 10px; border-radius: 4px; transition: all 0.2s; white-space: nowrap;
  }
  nav a:hover { color: var(--accent); background: rgba(0,200,255,0.08); }

  .hero {
    background: linear-gradient(135deg, #0a1628 0%, #0f2040 40%, #1a0a28 100%);
    padding: 80px 48px 64px;
    border-bottom: 1px solid var(--card-border);
    position: relative; overflow: hidden;
  }
  .hero::before {
    content: ''; position: absolute; top: -100px; right: -100px;
    width: 500px; height: 500px;
    background: radial-gradient(circle, rgba(167,139,250,0.06) 0%, transparent 70%);
    pointer-events: none;
  }
  .hero::after {
    content: ''; position: absolute; bottom: -80px; left: 30%;
    width: 400px; height: 400px;
    background: radial-gradient(circle, rgba(0,200,255,0.04) 0%, transparent 70%);
    pointer-events: none;
  }
  .hero-badge {
    display: inline-flex; align-items: center; gap: 8px;
    background: rgba(167,139,250,0.1);
    border: 1px solid rgba(167,139,250,0.3);
    border-radius: 20px; padding: 6px 16px;
    font-size: 12px; color: var(--accent4);
    letter-spacing: 1px; text-transform: uppercase; margin-bottom: 24px;
  }
  .hero h1 {
    font-family: Georgia, 'Times New Roman', Cambria, serif;
    font-size: clamp(28px, 4vw, 46px);
    line-height: 1.2; color: #fff; max-width: 820px; margin-bottom: 20px;
  }
  .hero h1 span { color: var(--accent4); }
  .hero-desc {
    color: var(--text-muted); max-width: 680px;
    font-size: 16px; margin-bottom: 36px;
  }
  .hero-tags { display: flex; flex-wrap: wrap; gap: 10px; }
  .tag {
    background: var(--navy-light);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 4px; padding: 4px 12px;
    font-size: 12px; color: var(--text-muted);
  }
  .tag.hot { border-color: var(--accent3); color: var(--accent3); }
  .tag.blue { border-color: var(--accent); color: var(--accent); }
  .tag.green { border-color: var(--accent2); color: var(--accent2); }
  .tag.purple { border-color: var(--accent4); color: var(--accent4); }

  .toc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 12px; padding: 40px 48px;
    background: var(--navy-mid);
    border-bottom: 1px solid var(--card-border);
  }
  .toc-item {
    display: flex; align-items: center; gap: 12px;
    background: var(--card); border: 1px solid var(--card-border);
    border-radius: 8px; padding: 14px 16px;
    text-decoration: none; color: var(--text-muted);
    font-size: 13px; transition: all 0.2s;
  }
  .toc-item:hover { border-color: var(--accent4); color: var(--accent4); transform: translateY(-2px); }
  .toc-num {
    background: rgba(167,139,250,0.1); color: var(--accent4);
    border-radius: 4px; padding: 2px 8px; font-size: 11px;
    font-family: 'Courier New', Courier, monospace; font-weight: bold; flex-shrink: 0;
  }

  .main-content { max-width: 1100px; margin: 0 auto; padding: 48px 32px; }

  .section { margin-bottom: 64px; }
  .section-header {
    display: flex; align-items: center; gap: 16px;
    margin-bottom: 28px; padding-bottom: 16px;
    border-bottom: 1px solid var(--card-border);
  }
  .section-icon {
    width: 44px; height: 44px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px; flex-shrink: 0;
  }
  .icon-blue { background: rgba(0,200,255,0.12); }
  .icon-green { background: rgba(0,229,160,0.12); }
  .icon-orange { background: rgba(255,107,53,0.12); }
  .icon-purple { background: rgba(167,139,250,0.12); }
  .icon-gold { background: rgba(245,200,66,0.12); }
  .section-title {
    font-family: Georgia, 'Times New Roman', Cambria, serif;
    font-size: clamp(20px, 2.5vw, 28px); color: #fff;
  }
  .section-subtitle { color: var(--text-muted); font-size: 13px; margin-top: 4px; }

  .card {
    background: var(--card); border: 1px solid var(--card-border);
    border-radius: 12px; padding: 28px; margin-bottom: 20px;
  }
  .card h3 {
    font-family: Georgia, 'Times New Roman', Cambria, serif;
    color: var(--accent); font-size: 17px; margin-bottom: 12px;
  }
  .card h4 {
    color: var(--accent2); font-size: 14px; margin: 18px 0 10px;
    text-transform: uppercase; letter-spacing: 0.8px;
  }
  .card p { color: var(--text-muted); margin-bottom: 12px; }
  .card p:last-child { margin-bottom: 0; }
  .card ul, .card ol { padding-left: 20px; }
  .card li { color: var(--text-muted); margin-bottom: 8px; }
  .card li strong { color: var(--text); }

  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }
  @media (max-width: 700px) { .grid-2 { grid-template-columns: 1fr; } }

  .callout { border-left: 3px solid; border-radius: 0 8px 8px 0; padding: 18px 22px; margin: 20px 0; }
  .callout-title { font-size: 12px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
  .callout p { font-size: 14px; margin-bottom: 0; }
  .callout.warn { background: var(--warn-bg); border-color: var(--warn-border); }
  .callout.warn .callout-title { color: var(--warn-border); }
  .callout.warn p { color: #fca97a; }
  .callout.tip { background: var(--tip-bg); border-color: var(--tip-border); }
  .callout.tip .callout-title { color: var(--tip-border); }
  .callout.tip p { color: #6ee7b7; }
  .callout.note { background: var(--note-bg); border-color: var(--note-border); }
  .callout.note .callout-title { color: var(--note-border); }
  .callout.note p { color: #7dd3f0; }
  .callout.exam { background: var(--exam-bg); border-color: var(--exam-border); }
  .callout.exam .callout-title { color: var(--exam-border); }
  .callout.exam p, .callout.exam li { color: #c4b5fd; }
  .callout.best { background: var(--best-bg); border-color: var(--best-border); }
  .callout.best .callout-title { color: var(--best-border); }
  .callout.best p, .callout.best li { color: #fde68a; }
  .callout ul { padding-left: 20px; margin-top: 8px; }
  .callout li { margin-bottom: 6px; font-size: 14px; }

  .code-block {
    background: #060e1c; border: 1px solid rgba(0,200,255,0.15);
    border-radius: 8px; overflow: hidden; margin: 16px 0;
  }
  .code-header {
    background: rgba(0,200,255,0.06); padding: 8px 16px;
    display: flex; align-items: center; justify-content: space-between;
    border-bottom: 1px solid rgba(0,200,255,0.1);
  }
  .code-lang {
    font-size: 11px; color: var(--accent); text-transform: uppercase;
    letter-spacing: 1px; font-family: 'Courier New', Courier, monospace;
  }
  .code-dots { display: flex; gap: 6px; }
  .dot { width: 10px; height: 10px; border-radius: 50%; }
  .dot-r { background: #ff5f57; } .dot-y { background: #ffbd2e; } .dot-g { background: #28c840; }
  .code-body {
    padding: 18px 20px;
    font-family: 'Courier New', Courier, 'Lucida Console', monospace;
    font-size: 13px; line-height: 1.7; color: #c9e7ff;
    overflow-x: auto; white-space: pre;
  }
  .code-body .cmd { color: #00e5a0; }
  .code-body .comment { color: #4a6580; font-style: italic; }
  .code-body .param { color: #f5c842; }
  .code-body .val { color: #ff9f7e; }
  .code-body .path { color: #a78bfa; }

  .flow {
    background: var(--card); border: 1px solid var(--card-border);
    border-radius: 12px; padding: 28px; margin: 20px 0;
  }
  .flow-title {
    font-family: Georgia, 'Times New Roman', Cambria, serif;
    color: var(--accent); font-size: 15px; margin-bottom: 24px; text-align: center;
  }
  .flow-steps { display: flex; flex-direction: column; gap: 0; }
  .flow-step { display: flex; align-items: flex-start; gap: 16px; position: relative; }
  .flow-step:not(:last-child)::after {
    content: ''; position: absolute; left: 20px; top: 44px; bottom: -2px;
    width: 2px; background: linear-gradient(to bottom, var(--accent), transparent);
  }
  .flow-num {
    width: 40px; height: 40px; border-radius: 50%;
    background: rgba(0,200,255,0.12); border: 2px solid var(--accent);
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; font-weight: bold; color: var(--accent); flex-shrink: 0;
    font-family: 'Courier New', monospace; margin-bottom: 28px;
  }
  .flow-content { padding-top: 8px; padding-bottom: 16px; flex: 1; }
  .flow-content strong { color: var(--text); display: block; margin-bottom: 6px; font-size: 15px; }
  .flow-content p { color: var(--text-muted); font-size: 14px; margin-bottom: 0; }

  .hflow { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; margin: 20px 0; }
  .hflow-box {
    background: var(--card); border: 1px solid var(--card-border);
    border-radius: 8px; padding: 10px 16px; font-size: 13px; color: var(--text-muted);
    text-align: center; flex: 1; min-width: 100px;
  }
  .hflow-box small { display: block; font-size: 10px; color: var(--text-dim); margin-top: 3px; }
  .hflow-box.active { border-color: rgba(0,200,255,0.35); color: var(--accent); }
  .hflow-arrow { color: var(--text-dim); font-size: 18px; flex-shrink: 0; }

  .arch-row { display: flex; flex-wrap: wrap; align-items: center; gap: 12px; margin-bottom: 16px; }
  .arch-box {
    border-radius: 8px; padding: 12px 20px;
    text-align: center; font-size: 13px; font-weight: 500;
  }
  .arch-box small { display: block; font-size: 10px; opacity: 0.7; margin-top: 3px; font-weight: 400; }
  .abox-blue { background: rgba(0,200,255,0.12); border: 1px solid rgba(0,200,255,0.3); color: #7ee8fa; }
  .abox-green { background: rgba(0,229,160,0.12); border: 1px solid rgba(0,229,160,0.3); color: #6ee7b7; }
  .abox-orange { background: rgba(255,107,53,0.12); border: 1px solid rgba(255,107,53,0.3); color: #fca97a; }
  .abox-purple { background: rgba(167,139,250,0.12); border: 1px solid rgba(167,139,250,0.3); color: #c4b5fd; }
  .abox-gold { background: rgba(245,200,66,0.12); border: 1px solid rgba(245,200,66,0.3); color: #fde68a; }
  .arch-connector { text-align: center; color: var(--text-dim); font-size: 22px; line-height: 1; margin: -4px 0; }

  .compare { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0; }
  @media (max-width: 600px) { .compare { grid-template-columns: 1fr; } }
  .cmp-box { border-radius: 8px; padding: 18px; }
  .cmp-box h5 { font-size: 13px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 12px; }
  .cmp-box ul { padding-left: 18px; } .cmp-box li { font-size: 13px; margin-bottom: 6px; }
  .cmp-a { background: rgba(0,200,255,0.06); border: 1px solid rgba(0,200,255,0.2); }
  .cmp-a h5 { color: var(--accent); } .cmp-a li { color: #7ee8fa; }
  .cmp-b { background: rgba(0,229,160,0.06); border: 1px solid rgba(0,229,160,0.2); }
  .cmp-b h5 { color: var(--accent2); } .cmp-b li { color: #6ee7b7; }

  .metrics { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 12px; margin: 16px 0; }
  .metric { background: var(--card); border: 1px solid var(--card-border); border-radius: 8px; padding: 18px; text-align: center; }
  .metric-val { font-family: Georgia, serif; font-size: 28px; font-weight: bold; color: var(--accent); line-height: 1; }
  .metric-val.orange { color: var(--accent3); } .metric-val.green { color: var(--accent2); } .metric-val.purple { color: var(--accent4); }
  .metric-label { font-size: 11px; color: var(--text-dim); margin-top: 6px; }
  .metric-desc { font-size: 12px; color: var(--text-muted); margin-top: 4px; }

  .qa-block { background: var(--card); border: 1px solid var(--card-border); border-radius: 10px; overflow: hidden; margin-bottom: 14px; }
  .qa-q {
    background: rgba(167,139,250,0.08); border-bottom: 1px solid rgba(167,139,250,0.15);
    padding: 14px 18px; font-size: 14px; color: #c4b5fd; font-weight: 500;
  }
  .qa-q::before { content: 'Q  '; opacity: 0.5; font-family: monospace; }
  .qa-a { padding: 14px 18px; font-size: 13px; color: var(--text-muted); line-height: 1.7; }
  .qa-a::before { content: 'A  '; color: var(--accent2); font-weight: bold; font-family: monospace; }

  .divider { border: none; border-top: 1px solid var(--card-border); margin: 40px 0; }

  code {
    font-family: 'Courier New', Courier, 'Lucida Console', monospace;
    background: rgba(0,200,255,0.08); border: 1px solid rgba(0,200,255,0.15);
    color: var(--accent); padding: 1px 6px; border-radius: 3px; font-size: 12.5px;
  }

  .hl { color: var(--accent); font-weight: 500; }
  .hl-green { color: var(--accent2); font-weight: 500; }
  .hl-orange { color: var(--accent3); }
  .hl-gold { color: var(--gold); }

  .strip-row {
    display: flex; align-items: center; gap: 12px;
    background: var(--card); border: 1px solid var(--card-border);
    border-radius: 6px; padding: 12px 18px; margin-bottom: 8px;
  }
  .strip-label { font-size: 12px; color: var(--text-dim); min-width: 160px; flex-shrink: 0; }
  .strip-val { font-size: 13px; color: var(--text); flex: 1; }
  .strip-badge { font-size: 11px; padding: 2px 10px; border-radius: 10px; border: 1px solid; flex-shrink: 0; }
  .sb-ok { border-color: var(--accent2); color: var(--accent2); background: rgba(0,229,160,0.07); }
  .sb-warn { border-color: var(--accent3); color: var(--accent3); background: rgba(255,107,53,0.07); }
  .sb-info { border-color: var(--accent); color: var(--accent); background: rgba(0,200,255,0.07); }
  .sb-purple { border-color: var(--accent4); color: var(--accent4); background: rgba(167,139,250,0.07); }

  .status-row { display: flex; flex-wrap: wrap; gap: 10px; margin: 12px 0; }
  .status-pill { display: inline-flex; align-items: center; gap: 6px; padding: 5px 14px; border-radius: 16px; font-size: 12px; border: 1px solid; }
  .sp-green { border-color: var(--accent2); color: var(--accent2); background: rgba(0,229,160,0.08); }
  .sp-red { border-color: #f87171; color: #f87171; background: rgba(248,113,113,0.08); }
  .sp-yellow { border-color: var(--gold); color: var(--gold); background: rgba(245,200,66,0.08); }
  .sp-blue { border-color: var(--accent); color: var(--accent); background: rgba(0,200,255,0.08); }

  .author-section { background: linear-gradient(135deg, #0a1628, #0d2040); border-top: 1px solid var(--card-border); padding: 60px 48px; }
  .author-title { font-family: Georgia, serif; font-size: 22px; color: var(--accent); margin-bottom: 28px; text-align: center; }
  .author-card {
    background: var(--card); border: 1px solid var(--card-border); border-radius: 14px; padding: 36px;
    max-width: 800px; margin: 0 auto 28px; display: flex; gap: 32px; align-items: flex-start; flex-wrap: wrap;
  }
  .author-avatar {
    width: 90px; height: 90px; border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    display: flex; align-items: center; justify-content: center; font-size: 36px; flex-shrink: 0;
  }
  .author-info { flex: 1; min-width: 240px; }
  .author-name { font-family: Georgia, serif; font-size: 22px; color: #fff; margin-bottom: 4px; }
  .author-role { color: var(--accent); font-size: 14px; margin-bottom: 14px; }
  .author-bio { color: var(--text-muted); font-size: 14px; line-height: 1.7; margin-bottom: 16px; }
  .badge-row { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 18px; }
  .badge { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.1); border-radius: 4px; padding: 4px 12px; font-size: 11px; color: var(--text-muted); }
  .badge.cv { border-color: var(--accent); color: var(--accent); }
  .badge.veeam { border-color: var(--accent2); color: var(--accent2); }
  .badge.nb { border-color: var(--accent3); color: var(--accent3); }
  .badge.netapp { border-color: var(--accent4); color: var(--accent4); }
  .contact-card {
    display: inline-flex; align-items: center; gap: 10px;
    background: rgba(0,200,255,0.08); border: 1px solid rgba(0,200,255,0.25);
    border-radius: 8px; padding: 10px 18px; text-decoration: none; color: var(--accent); font-size: 14px; transition: all 0.2s;
  }
  .contact-card:hover { background: rgba(0,200,255,0.15); }
  .disclaimer { background: var(--warn-bg); border: 1px solid rgba(255,107,53,0.25); border-radius: 8px; padding: 18px 24px; max-width: 800px; margin: 0 auto; }
  .disclaimer p { font-size: 13px; color: #fca97a; line-height: 1.6; }
  footer { background: #060e1c; border-top: 1px solid var(--card-border); padding: 24px 48px; text-align: center; color: var(--text-dim); font-size: 12px; }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-brand">üì¶ Commvault Tutorial 8</div>
  <a href="#airgap">AirGap Protect</a>
  <a href="#aws-ec2-overview">AWS EC2 Overview</a>
  <a href="#access-node">Access Node Setup</a>
  <a href="#hypervisor">Hypervisor Config</a>
  <a href="#storage-accelerator">Storage Accelerator</a>
  <a href="#ec2-backup-restore">EC2 Backup &amp; Restore</a>
  <a href="#s3-overview">S3 Backup Overview</a>
  <a href="#s3-config">S3 Configuration</a>
  <a href="#s3-backup-restore">S3 Backup &amp; Restore</a>
  <a href="#interview">Interview Q&amp;A</a>
</nav>

<!-- HERO -->
<div class="hero">
  <div class="hero-badge">üå© Tutorial 8 ¬∑ Cloud Backup &amp; Restore</div>
  <h1>Commvault Cloud Backup Mastery:<br><span>AirGap Protect, AWS EC2 &amp; S3</span></h1>
  <p class="hero-desc">A comprehensive hands-on guide covering Commvault AirGap Protect Storage configuration, AWS EC2 agentless VM backup and restore, and Amazon S3 object storage protection using the Cloud Apps agent ‚Äî including IAM role setup, access node deployment, storage accelerator architecture, and end-to-end restore procedures.</p>
  <div class="hero-tags">
    <span class="tag purple">‚òÅ AirGap Protect Storage</span>
    <span class="tag blue">üñ• AWS EC2 Backup</span>
    <span class="tag green">ü™£ Amazon S3 Backup</span>
    <span class="tag hot">üîê IAM Roles &amp; Policies</span>
    <span class="tag purple">‚ö° Storage Accelerator</span>
    <span class="tag blue">üîÑ In-Place Restore</span>
  </div>
</div>

<!-- TOC -->
<div class="toc-grid">
  <a class="toc-item" href="#airgap"><span class="toc-num">01</span> AirGap Protect Storage</a>
  <a class="toc-item" href="#aws-ec2-overview"><span class="toc-num">02</span> AWS EC2 Backup Overview</a>
  <a class="toc-item" href="#access-node"><span class="toc-num">03</span> Access Node Deployment</a>
  <a class="toc-item" href="#hypervisor"><span class="toc-num">04</span> Hypervisor Configuration</a>
  <a class="toc-item" href="#storage-accelerator"><span class="toc-num">05</span> Storage Accelerator</a>
  <a class="toc-item" href="#ec2-backup-restore"><span class="toc-num">06</span> EC2 Backup &amp; Restore</a>
  <a class="toc-item" href="#s3-overview"><span class="toc-num">07</span> S3 Backup Overview</a>
  <a class="toc-item" href="#s3-config"><span class="toc-num">08</span> S3 Configuration</a>
  <a class="toc-item" href="#s3-backup-restore"><span class="toc-num">09</span> S3 Backup &amp; Restore</a>
  <a class="toc-item" href="#interview"><span class="toc-num">10</span> Interview Q&amp;A</a>
</div>

<div class="main-content">

<!-- ============================= SECTION 1: AIRGAP ============================= -->
<section id="airgap" class="section">
  <div class="section-header">
    <div class="section-icon icon-purple">üõ°</div>
    <div>
      <div class="section-title">Commvault AirGap Protect Storage</div>
      <div class="section-subtitle">Immutable cloud-managed backup storage ‚Äî ransomware-proof secondary copy</div>
    </div>
  </div>

  <div class="card">
    <h3>What is AirGap Protect Storage?</h3>
    <p>AirGap Protect Storage (previously called <strong>Metallic Cloud Storage</strong> before version 11.36) is a Commvault-managed, cloud-based backup storage solution designed to be completely isolated from your primary network. Unlike standard cloud libraries (AWS S3, Azure Blob) where <em>you</em> manage access keys, buckets, and security, with AirGap Protect, <strong>Commvault manages all of that for you</strong>.</p>
    <p>The core security principle: the storage is only connected to your environment <strong>during an active backup or aux copy job</strong>. When no job is running, the storage is completely disconnected ‚Äî making it unreachable by ransomware or attackers present on your network.</p>

    <div class="callout note">
      <div class="callout-title">üìò Version Note</div>
      <p>The product was called <strong>Metallic Cloud Storage</strong> up to version 11.32. From version <strong>11.36 onward</strong>, Commvault renamed it to <strong>AirGap Protect Storage</strong>. The underlying concept is the same ‚Äî only the name changed.</p>
    </div>

    <div class="compare">
      <div class="cmp-a cmp-box">
        <h5>‚òÅ Standard Cloud Library (S3/Azure)</h5>
        <ul>
          <li>You manage access keys and credentials</li>
          <li>You manage bucket security and permissions</li>
          <li>Always connected to your network</li>
          <li>Can be explored via cloud console (AWS/Azure)</li>
          <li>Deletable from inside Commvault or cloud console</li>
          <li>Vulnerable if credentials are compromised</li>
        </ul>
      </div>
      <div class="cmp-b cmp-box">
        <h5>üõ° AirGap Protect Storage</h5>
        <ul>
          <li>Commvault manages access ‚Äî no keys to manage</li>
          <li>Commvault manages all storage-level security</li>
          <li>Disconnected when no job is running</li>
          <li>Cannot be explored outside of Commvault UI</li>
          <li>Immutable ‚Äî jobs cannot be deleted without Commvault Support auth code</li>
          <li>Isolated from your network ‚Äî ransomware cannot reach it</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Key Features</h3>
    <div class="strip-row">
      <span class="strip-label">‚òÅ Hosted Platforms</span>
      <span class="strip-val">Microsoft Azure (min version 11.28) or Oracle Cloud Infrastructure ‚Äî OCI (min version 11.36)</span>
      <span class="strip-badge sb-info">Two Options</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">üîí Immutable Storage</span>
      <span class="strip-val">Once backup data is written, it cannot be manually deleted. Deletion requires an auth code from Commvault Technical Support.</span>
      <span class="strip-badge sb-ok">Ransomware-Safe</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">üå° Hot Tier</span>
      <span class="strip-val">For primary backups with frequent access ‚Äî faster restore times, higher cost</span>
      <span class="strip-badge sb-info">Primary Copy</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">‚ùÑ Cool Tier</span>
      <span class="strip-val">For long-term retention with infrequent access ‚Äî lower cost, slower restore times</span>
      <span class="strip-badge sb-info">Archive Copy</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">üìè Licensing</span>
      <span class="strip-val">Purchased in TB increments (e.g., 50 TB, 100 TB, 200 TB). License is delivered as an XML file applied to your CommServe.</span>
      <span class="strip-badge sb-warn">License Required</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">üåç Regions</span>
      <span class="strip-val">Multiple Azure and OCI regions available. Select the region geographically nearest to your on-premises data center to minimize latency.</span>
      <span class="strip-badge sb-ok">Multi-Region</span>
    </div>
  </div>

  <div class="card">
    <h3>Prerequisites Before Configuration</h3>
    <div class="flow">
      <div class="flow-title">AirGap Protect Storage ‚Äî Setup Prerequisites</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Purchase and Obtain the License File</strong>
            <p>Contact your Commvault sales or support team to purchase an AirGap Protect license (sized in TB). Specify the cloud platform (Azure or OCI) and the region nearest to your data center. Commvault provisions the storage and delivers an <strong>XML license file</strong> to you.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Apply the License on the CommServe</strong>
            <p>In the CommServe, navigate to <strong>Managed Licenses ‚Üí Actions ‚Üí Apply License</strong>, browse to the XML file, and click Apply. The license gets applied automatically. Without this step, the AirGap Protect option will be greyed out with an error: <em>"License is required to use AirGap Protect."</em></p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Whitelist Required Endpoints on CommServe and Media Agent</strong>
            <p>Your CommServe and Media Agent must be able to reach the AirGap Protect cloud endpoints through any corporate firewalls. Use <code>cvping</code> (equivalent to Telnet) to test connectivity on port 4434. Different URL sets apply for Azure vs OCI ‚Äî refer to the official Commvault documentation for the complete list.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash ‚Äî test connectivity to AirGap endpoint</span><div class="code-dots"><div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div></div></div>
              <div class="code-body"><span class="comment"># cvping is equivalent to Telnet for Commvault connectivity testing</span>
<span class="comment"># Replace with the actual AirGap endpoint URL from CV documentation</span>
<span class="cmd">cvping</span> <span class="val">airgap-endpoint.commvault.azure.com</span> <span class="param">4434</span>

<span class="comment"># Successful output: Connection established</span>
<span class="comment"># If failed: check firewall rules on CommServe and Media Agent</span></div>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Select the Correct Region</strong>
            <p>When ordering the license, specify a region geographically close to your on-premises data center. For example, if your data center is in Bangalore, India, select <strong>Southeast Asia</strong> (Azure) or <strong>India West / India South</strong> (OCI). Choosing a distant region increases latency and degrades job throughput.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Configuration ‚Äî Command Center</h3>
    <p>After the license is applied and endpoints are whitelisted, AirGap Protect Storage can be configured from either Command Center or CommCell Console.</p>
    <div class="flow">
      <div class="flow-title">Command Center Configuration Steps</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Navigate to Storage ‚Üí AirGap Protect ‚Üí Add</strong>
            <p>In Command Center, go to <strong>Storage ‚Üí AirGap Protect</strong> and click <strong>Add</strong>. If the license is not applied, you will see a warning at this step.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Provide Name and Select Media Agent</strong>
            <p>Give the storage a descriptive name. Select the Media Agent that will connect to this AirGap Protect storage. This should be the MA closest to the workloads being protected.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Select the Location (Auto-Populated from License)</strong>
            <p>Once the license is applied, the provisioned region/location is automatically populated in the dropdown. Select the region that matches your license.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Enable Deduplication (Optional) and Save</strong>
            <p>Optionally enable cloud-level deduplication. Click <strong>Save</strong>. The AirGap Protect storage library is created and ready to be associated with a storage policy or plan.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° CommCell Console Alternative</div>
      <p>You can also create AirGap Protect from CommCell Console: go to <strong>Storage Resources ‚Üí Storage Pools ‚Üí Add Storage Pool ‚Üí Cloud ‚Üí AirGap Protect Storage</strong>. The library option also works but creating from Storage Pool is preferred.</p>
    </div>
  </div>

  <div class="card">
    <h3>Azure ExpressRoute ‚Äî Dedicated Private Connection</h3>
    <p>By default, backup traffic to AirGap Protect travels over the public internet, which can introduce latency and reduce throughput for your aux copy jobs. Azure ExpressRoute provides a <strong>dedicated private link</strong> between your on-premises data center and the AirGap Protect storage, bypassing the public internet entirely.</p>

    <div class="callout note">
      <div class="callout-title">üìò When to Use ExpressRoute</div>
      <p>Configure ExpressRoute when you observe slow aux copy throughput to AirGap Protect that cannot be explained by data volume alone ‚Äî particularly when your on-premises data center and AirGap region are geographically distant, or when your ISP introduces variable latency.</p>
    </div>

    <div class="flow">
      <div class="flow-title">6-Step ExpressRoute Configuration Process</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Configure AirGap Protect Library in Commvault</strong>
            <p>The AirGap Protect storage must already be fully configured and working before setting up ExpressRoute.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Request Storage Resource ID from Commvault Support</strong>
            <p>Contact Commvault Technical Support and request the <strong>Storage Resource ID</strong> for your AirGap Protect instance. This ID is required to create the private endpoint on the Azure side.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Create Private Endpoint in Azure (Cloud Team Task)</strong>
            <p>Engage your Azure cloud admin. Provide them the Storage Resource ID from Commvault. They create a Private Endpoint in Azure pointing to the AirGap Protect storage resource.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Provide Private Endpoint Name Back to Commvault Support</strong>
            <p>Share the name of the created Private Endpoint with Commvault Technical Support so they can approve the connection from their side.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">5</div>
          <div class="flow-content">
            <strong>Commvault Approves the Private Endpoint</strong>
            <p>Commvault Support approves the connection. On the Azure Portal, the Private Endpoint connection status changes to <strong>Approved</strong>.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">6</div>
          <div class="flow-content">
            <strong>Update DNS to Resolve to Private Link IP</strong>
            <p>Update your DNS server to resolve the storage account endpoint to the Private Link IP address. If using IP-based connectivity (no DNS), this step may not be required.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Troubleshooting AirGap Protect ‚Äî Cloud Test Tool</h3>
    <p>If an AirGap Protect library goes offline, use the <strong>Cloud Test Tool</strong> on the Windows Media Agent connected to that storage. This tool is the same used for standard cloud libraries, but select <strong>Option 2 (AirGap Protect)</strong> and authenticate with Commvault credentials (the tool fetches stored credentials from the CommServe database).</p>
    <div class="strip-row">
      <span class="strip-label">Access Functionality Check</span>
      <span class="strip-val">Tests whether the Media Agent can connect to the AirGap endpoint ‚Äî reveals network or endpoint issues</span>
      <span class="strip-badge sb-info">Option 1</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Upload/Download Speed Test</span>
      <span class="strip-val">Measures throughput between MA and AirGap storage ‚Äî reveals performance issues</span>
      <span class="strip-badge sb-info">Performance Test</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Adding Capacity</span>
      <span class="strip-val">If the AirGap storage is full, contact Commvault Support to purchase additional capacity (additional license required)</span>
      <span class="strip-badge sb-warn">Support Required</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Deleting Jobs</span>
      <span class="strip-val">Cannot be done without an auth code from Commvault Support ‚Äî immutability by design</span>
      <span class="strip-badge sb-warn">Auth Code Needed</span>
    </div>
  </div>

  <div class="callout exam">
    <div class="callout-title">üéì Exam / Interview Tip</div>
    <p>Key distinction: AirGap Protect is <strong>not accessible outside of Commvault</strong> ‚Äî unlike a regular S3 bucket which you can browse via the AWS console. This is by design. The storage is Commvault-managed and immutable. Also remember: the name changed from Metallic Cloud Storage (version 11.32) to AirGap Protect Storage (version 11.36).</p>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 2: AWS EC2 OVERVIEW ============================= -->
<section id="aws-ec2-overview" class="section">
  <div class="section-header">
    <div class="section-icon icon-blue">üñ•</div>
    <div>
      <div class="section-title">AWS EC2 Backup ‚Äî Overview &amp; Scope</div>
      <div class="section-subtitle">Agentless virtual machine backup for Amazon EC2 instances using Commvault VSA</div>
    </div>
  </div>

  <div class="card">
    <h3>What Commvault Can and Cannot Back Up</h3>
    <p>Before configuring any backup, you must understand the scope of Commvault's support for AWS EC2. This is critical for setting correct expectations with the customer.</p>

    <div class="compare">
      <div class="cmp-a cmp-box">
        <h5>‚úÖ Commvault CAN Back Up</h5>
        <ul>
          <li>EC2 instances (virtual machines)</li>
          <li>VPC resources</li>
          <li>EBS (Elastic Block Store) volumes</li>
          <li>Full VM restores (in-place and out-of-place)</li>
          <li>Cross-cloud restores (AWS ‚Üí Azure, AWS ‚Üí GCP, AWS ‚Üí VMware)</li>
        </ul>
      </div>
      <div class="cmp-b cmp-box">
        <h5>‚ùå Commvault CANNOT Back Up</h5>
        <ul>
          <li>EC2 instance user data</li>
          <li>AMIs (Amazon Machine Images)</li>
          <li>EC2 instance store volumes</li>
          <li>EC2 instances with root device type as <em>instance store</em></li>
        </ul>
      </div>
    </div>

    <div class="callout note">
      <div class="callout-title">üìò Cross-Cloud Restore Use Case</div>
      <p>Out-of-place restores support restoring from an AWS backup to Azure, GCP, or VMware destinations. This is particularly useful for <strong>cloud migration projects</strong> ‚Äî back up in AWS, restore to Azure as part of a workload migration.</p>
    </div>
  </div>

  <div class="card">
    <h3>AWS vs VMware ‚Äî Terminology Comparison</h3>
    <p>If you are familiar with Commvault VMware backups, the AWS EC2 backup process is very similar. The key difference is the terminology and how the hypervisor is defined.</p>
    <div class="strip-row">
      <span class="strip-label">Virtual Machine</span>
      <span class="strip-val">In VMware: <strong>VM</strong>. In AWS: <strong>EC2 Instance</strong></span>
      <span class="strip-badge sb-info">Terminology</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Hypervisor</span>
      <span class="strip-val">In VMware: vCenter or ESX host (physical server). In AWS: <strong>the AWS Account itself</strong> ‚Äî no physical hypervisor machine exists</span>
      <span class="strip-badge sb-info">Key Difference</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Proxy / Access Node</span>
      <span class="strip-val">In VMware: VSA proxy (can be on-prem). In AWS: VSA / Access Node must be deployed <strong>in the AWS cloud</strong> (same or different region)</span>
      <span class="strip-badge sb-warn">Must Be in AWS Cloud</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Transport Mode</span>
      <span class="strip-val">VMware: Hot Add, NBD, SAN-based. AWS: <strong>EBS Direct</strong>, Hot Add, Import/Export ‚Äî 3 modes total</span>
      <span class="strip-badge sb-info">Default: EBS Direct</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Credentials / Auth</span>
      <span class="strip-val">VMware: vCenter service account credentials. AWS: IAM Role, Access Key + Secret Key, or STS Assume Role</span>
      <span class="strip-badge sb-info">3 Auth Methods</span>
    </div>

    <div class="callout best">
      <div class="callout-title">‚≠ê Best Practice ‚Äî Access Node Region</div>
      <p>Always deploy the Access Node (VSA) in the <strong>same AWS region as the workload EC2 instances</strong> being protected. While cross-region access node is technically supported, it introduces latency and degrades backup throughput. In hybrid environments (on-prem CommServe + AWS workloads), the access node must still reside in the AWS cloud.</p>
    </div>
  </div>

  <div class="card">
    <h3>High-Level Configuration Steps</h3>
    <div class="hflow">
      <div class="hflow-box active">Step 1<small>Deploy Access Node (VSA) in AWS cloud</small></div>
      <div class="hflow-arrow">‚Üí</div>
      <div class="hflow-box active">Step 2<small>Configure Hypervisor (AWS Account)</small></div>
      <div class="hflow-arrow">‚Üí</div>
      <div class="hflow-box active">Step 3<small>Create VM Group (subclient)</small></div>
      <div class="hflow-arrow">‚Üí</div>
      <div class="hflow-box active">Step 4<small>Run Backup &amp; Restore</small></div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 3: ACCESS NODE ============================= -->
<section id="access-node" class="section">
  <div class="section-header">
    <div class="section-icon icon-green">üîß</div>
    <div>
      <div class="section-title">Access Node Deployment (AWS EC2 ‚Äî VSA Setup)</div>
      <div class="section-subtitle">Provisioning and configuring the Virtual Server Agent on an AWS EC2 instance</div>
    </div>
  </div>

  <div class="card">
    <h3>Supported Operating Systems for VSA</h3>
    <p>The Commvault Virtual Server Agent (VSA) package ‚Äî which designates an EC2 instance as an access node ‚Äî can be installed on both Linux and Windows EC2 instances.</p>

    <div class="compare">
      <div class="cmp-a cmp-box">
        <h5>üêß Linux VSA Options</h5>
        <ul>
          <li>Amazon Linux 2 AMI (recommended ‚Äî fully tested)</li>
          <li>Amazon Linux 2023 (documentation states supported ‚Äî see Mono issue below)</li>
          <li>Red Hat Enterprise Linux (RHEL)</li>
          <li>Other supported Linux distributions per Commvault docs</li>
        </ul>
      </div>
      <div class="cmp-b cmp-box">
        <h5>ü™ü Windows VSA Options</h5>
        <ul>
          <li>Windows Server 2016, 2019, 2022</li>
          <li>Available as free-tier eligible in AWS marketplace</li>
          <li>RDP-based access using decrypted password</li>
          <li>Supports x64 and ARM architecture</li>
        </ul>
      </div>
    </div>

    <div class="callout warn">
      <div class="callout-title">‚ö† Known Issue ‚Äî Amazon Linux 2023 + Mono</div>
      <p>Commvault documentation lists Amazon Linux 2023 as a supported VSA operating system, but the <strong>Mono framework package is not available</strong> in Amazon Linux 2023's default dnf repository. Commvault VSA requires Mono for certain operations. If you encounter the error <em>"mono framework is not initialized"</em>, switch your VSA EC2 instance to <strong>Amazon Linux 2</strong> and install Mono using: <code>amazon-linux-extras install mono</code>. This is a documentation deficiency ‚Äî Amazon Linux 2 is the safe, tested choice.</p>
    </div>
  </div>

  <div class="card">
    <h3>Step-by-Step: Deploy Linux VSA on Amazon Linux 2</h3>
    <div class="flow">
      <div class="flow-title">Access Node Provisioning ‚Äî AWS EC2 (Amazon Linux 2)</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Launch EC2 Instance (Amazon Linux 2, t2.micro or larger)</strong>
            <p>In the AWS Console, launch a new EC2 instance. Select <strong>Amazon Linux 2 AMI</strong> (free-tier eligible). Choose at least t2.micro for lab ‚Äî production should meet Commvault system requirements. Allocate at least <strong>50 GB</strong> root disk (8 GB is insufficient for Commvault packages). Generate or use an existing key pair (PPK format for PuTTY).</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Open Required Inbound Ports in Security Group</strong>
            <p>Edit the EC2 instance's security group to allow the following inbound ports from your CommServe IP.</p>
            <div class="status-row">
              <span class="status-pill sp-blue">Port 22 ‚Äî SSH (permanent)</span>
              <span class="status-pill sp-blue">Port 8400 ‚Äî Commvault (permanent)</span>
              <span class="status-pill sp-blue">Port 8403 ‚Äî Commvault (permanent)</span>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Enable Password-Based Authentication</strong>
            <p>By default, Amazon Linux 2 EC2 instances disable password-based SSH ‚Äî only key-pair authentication is allowed. Commvault requires username/password authentication to push packages. You must modify the SSH config file to enable it.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash ‚Äî enable password auth on EC2 instance</span><div class="code-dots"><div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div></div></div>
              <div class="code-body"><span class="comment"># Connect to the EC2 instance using PuTTY with PPK key (ec2-user as default user)</span>
<span class="comment"># Edit the SSH daemon config file</span>
<span class="cmd">sudo vi</span> /etc/ssh/sshd_config

<span class="comment"># Find the line: PasswordAuthentication no</span>
<span class="comment"># Change it to: PasswordAuthentication yes</span>
<span class="comment"># Save and exit (ESC ‚Üí :wq)</span>

<span class="comment"># Restart the SSH service to apply changes</span>
<span class="cmd">sudo systemctl restart</span> sshd

<span class="comment"># Set a password for the ec2-user (remember this for Commvault config)</span>
<span class="cmd">sudo passwd</span> ec2-user</div>
            </div>
            <div class="callout warn">
              <div class="callout-title">‚ö† Always Back Up Config Files Before Editing</div>
              <p>Best practice: before modifying any config file, take a backup copy ‚Äî e.g., <code>sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak</code>. This allows you to restore the original if something goes wrong.</p>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Install Mono Package (Amazon Linux 2 only)</strong>
            <p>Commvault VSA on Linux requires the Mono framework. On Amazon Linux 2, install it using the Amazon Linux Extras repository.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash ‚Äî install Mono on Amazon Linux 2</span><div class="code-dots"><div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div></div></div>
              <div class="code-body"><span class="cmd">sudo amazon-linux-extras install</span> mono <span class="param">-y</span>

<span class="comment"># Verify installation</span>
<span class="cmd">mono --version</span>
<span class="comment"># Expected: Mono JIT compiler version x.x.x</span></div>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">5</div>
          <div class="flow-content">
            <strong>Assign IAM Role to the EC2 Instance</strong>
            <p>Before pushing Commvault packages, assign the IAM Role (created in the Hypervisor Configuration section) to this EC2 instance. In the AWS Console: <strong>EC2 ‚Üí Select Instance ‚Üí Actions ‚Üí Security ‚Üí Modify IAM Role ‚Üí Select the Commvault IAM role ‚Üí Update IAM Role</strong>.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">6</div>
          <div class="flow-content">
            <strong>Push Commvault Packages from CommServe</strong>
            <p>In the CommCell Console: <strong>Tools ‚Üí Add/Remove Software ‚Üí Install Software ‚Üí Unix/Linux ‚Üí Manual Install</strong>. Enter the EC2 instance's <strong>Public IP</strong> (not private IP ‚Äî your CommServe is outside the AWS cloud), enter credentials (ec2-user + password), and select the following packages.</p>
            <div class="status-row">
              <span class="status-pill sp-green">‚úì Virtual Server Agent (VSA)</span>
              <span class="status-pill sp-green">‚úì Storage Accelerator</span>
            </div>
            <p style="margin-top:10px; font-size:13px; color:var(--text-muted)">Use the <strong>Public IP</strong> when your CommServe is on-prem or on a different network. Use <strong>Private IP</strong> only when CommServe is also within the same AWS VPC.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° Lab Cost Warning ‚Äî AWS Free Tier</div>
      <p>When using the AWS free tier for lab setup: always <strong>terminate (delete) EC2 instances immediately after completing your lab</strong>. Stopping (not terminating) still incurs storage charges. Leaving instances running can result in unexpected billing at month end ‚Äî even on free tier accounts.</p>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 4: HYPERVISOR ============================= -->
<section id="hypervisor" class="section">
  <div class="section-header">
    <div class="section-icon icon-orange">üîë</div>
    <div>
      <div class="section-title">Hypervisor Configuration ‚Äî AWS Account as Hypervisor</div>
      <div class="section-subtitle">IAM policy, role creation, and Commvault hypervisor registration for AWS EC2 backups</div>
    </div>
  </div>

  <div class="card">
    <h3>The AWS Account as a Hypervisor</h3>
    <p>In VMware backups, the hypervisor is a physical vCenter server or ESX host with an IP address. In AWS, there is no equivalent physical hypervisor machine. Instead, <strong>the AWS Account itself acts as the hypervisor</strong> in Commvault. Three authentication methods are supported for configuring this AWS account hypervisor:</p>
    <div class="strip-row">
      <span class="strip-label">Method 1 ‚Äî IAM Role</span>
      <span class="strip-val">Assign an IAM role directly to the access node EC2 instance. No long-lived credentials to manage. Most secure.</span>
      <span class="strip-badge sb-ok">Recommended</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Method 2 ‚Äî Access Key + Secret Key</span>
      <span class="strip-val">Generate IAM user access keys and provide them directly in Commvault. Credentials must be rotated and managed.</span>
      <span class="strip-badge sb-info">Common in Labs</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Method 3 ‚Äî STS Assume Role</span>
      <span class="strip-val">Cross-account role assumption using AWS Security Token Service. Used in multi-account enterprise environments.</span>
      <span class="strip-badge sb-info">Enterprise Use</span>
    </div>
  </div>

  <div class="card">
    <h3>Method 1: IAM Role (Recommended) ‚Äî Step-by-Step</h3>

    <div class="flow">
      <div class="flow-title">IAM Role Creation and Attachment Workflow</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Create an IAM Policy with Commvault-Required Permissions</strong>
            <p>In the AWS Console, navigate to <strong>IAM ‚Üí Policies ‚Üí Create Policy ‚Üí JSON</strong>. Paste the <strong>JSON permission document provided in the official Commvault documentation</strong> (do not use generic ChatGPT-generated JSON ‚Äî use the vendor-tested version). Review and name the policy (e.g., <code>CommvaultBackupRecovery</code>), then create it.</p>
            <div class="callout best">
              <div class="callout-title">‚≠ê Always Use Commvault-Provided JSON</div>
              <p>Commvault publishes a tested, documented JSON permissions file for AWS. Use this over any third-party or AI-generated policy. The Commvault JSON is validated against their backup and restore operations and includes only the minimum required permissions.</p>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Create an IAM Role for EC2</strong>
            <p>In IAM: <strong>Roles ‚Üí Create Role ‚Üí AWS Service ‚Üí EC2</strong> (use case). In the permissions step, search for and attach the policy created in Step 1. Provide a meaningful role name (e.g., <code>CommvaultEC2Role</code>) and create the role.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Attach the IAM Role to the Access Node EC2 Instance</strong>
            <p>Select the access node EC2 instance in the EC2 dashboard: <strong>Actions ‚Üí Security ‚Üí Modify IAM Role ‚Üí Select CommvaultEC2Role ‚Üí Update IAM Role</strong>. The role is now associated with the access node ‚Äî Commvault will use it for all backup and restore operations.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Configure Hypervisor in Commvault Command Center</strong>
            <p>In Command Center: <strong>Protect ‚Üí Virtualization ‚Üí Add Hypervisor ‚Üí Amazon Web Services</strong>. Provide a name (e.g., <code>AWS Cloud</code>), select <strong>IAM Role</strong> as the authentication method, select the Access Node (the EC2 instance with the VSA package), and enter the correct <strong>AWS region</strong> where the access node resides (e.g., <code>ap-south-1</code> for Mumbai). Click Next.</p>
            <div class="callout note">
              <div class="callout-title">üìò Finding the AWS Region Code</div>
              <p>The region code is visible in the EC2 instance's DNS hostname ‚Äî look for a segment like <code>ap-south-1</code> or <code>us-east-1</code> in the public DNS name shown in the instance summary page.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 5: STORAGE ACCELERATOR ============================= -->
<section id="storage-accelerator" class="section">
  <div class="section-header">
    <div class="section-icon icon-gold">‚ö°</div>
    <div>
      <div class="section-title">Storage Accelerator ‚Äî Direct VSA-to-Cloud Data Path</div>
      <div class="section-subtitle">Bypassing the Media Agent for higher backup throughput on cloud workloads</div>
    </div>
  </div>

  <div class="card">
    <h3>Standard Data Path vs. Storage Accelerator Data Path</h3>
    <p>Understanding the Storage Accelerator requires understanding the two possible data paths during an AWS EC2 backup job.</p>

    <div class="flow">
      <div class="flow-title">Without Storage Accelerator (2-Hop Path)</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>CommServe triggers backup job</strong>
            <p>CommServe initiates the job, communicating with both the Media Agent and the VSA (Access Node).</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>VSA reads data from EC2 workload VMs</strong>
            <p>The VSA (Access Node in AWS cloud) reads backup data from the EC2 instances being protected.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>VSA sends data to Media Agent (Hop 1)</strong>
            <p>Data travels from the AWS cloud VSA to the Media Agent ‚Äî which may be on-premises or in a different region. This is the first network hop and can be a major bottleneck.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Media Agent writes data to Cloud Library (Hop 2)</strong>
            <p>The Media Agent writes the received data to the cloud library (e.g., S3 bucket). This is the second network hop ‚Äî data travels again over the network to cloud storage.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="flow" style="margin-top:20px">
      <div class="flow-title">With Storage Accelerator (1-Hop Path ‚Äî Recommended for Cloud)</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>CommServe triggers backup job</strong>
            <p>CommServe initiates the job as normal, communicating with both Media Agent and VSA.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>VSA reads data from EC2 workload VMs</strong>
            <p>The VSA reads backup data from the EC2 instances. Storage Accelerator package is installed on the VSA.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>VSA writes data DIRECTLY to Cloud Library ‚Äî bypassing Media Agent (Hop 1 only)</strong>
            <p>Because the Storage Accelerator package is installed on the VSA and the VSA has direct connectivity to the cloud library, data is written directly from the VSA to the cloud storage. The Media Agent is bypassed for the data transfer.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>VSA sends metadata to Media Agent (no data, only metadata)</strong>
            <p>After data transfer to the cloud library is complete, the VSA sends only metadata (index, chunk information) to the Media Agent. The Media Agent updates Index Cache and DDB. No backup data traverses this path.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="callout best">
      <div class="callout-title">‚≠ê Best Practice ‚Äî Storage Accelerator for All Cloud Workloads</div>
      <p>Always install the Storage Accelerator package on VSA nodes that are backing up cloud workloads. The prerequisite is that the VSA must have <strong>direct network connectivity to the cloud library</strong>. If the VSA cannot reach the cloud library, the job will fail. When this connectivity exists, Storage Accelerator significantly improves throughput by eliminating the Media Agent hop.</p>
    </div>
  </div>

  <div class="card">
    <h3>Storage Accelerator ‚Äî Architecture Diagram</h3>
    <div class="arch-row">
      <div class="arch-box abox-blue">CommServe<small>Job trigger &amp; orchestration</small></div>
      <div class="arch-connector">‚Üí</div>
      <div class="arch-box abox-green">Media Agent<small>Index Cache + DDB only<br>(no data flow)</small></div>
    </div>
    <div class="arch-row">
      <div class="arch-box abox-blue">CommServe<small>Job trigger &amp; orchestration</small></div>
      <div class="arch-connector">‚Üí</div>
      <div class="arch-box abox-purple">VSA / Access Node<small>Storage Accelerator installed<br>Reads EC2 data</small></div>
      <div class="arch-connector">‚Üí</div>
      <div class="arch-box abox-gold">Cloud Library<small>S3 / Azure Blob / AirGap<br>Direct write from VSA</small></div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 6: EC2 BACKUP & RESTORE ============================= -->
<section id="ec2-backup-restore" class="section">
  <div class="section-header">
    <div class="section-icon icon-green">üîÑ</div>
    <div>
      <div class="section-title">EC2 Backup &amp; Restore ‚Äî End-to-End Walkthrough</div>
      <div class="section-subtitle">VM Group configuration, running backups, and in-place restore with troubleshooting</div>
    </div>
  </div>

  <div class="card">
    <h3>VM Group (Subclient) Configuration</h3>
    <p>Once the hypervisor is configured, create a VM Group to define which EC2 instances to protect and where to store the backups.</p>
    <div class="flow">
      <div class="flow-title">VM Group Creation ‚Äî Command Center</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Browse Available EC2 Instances</strong>
            <p>After the hypervisor is configured successfully, click <strong>Add VM Group</strong>. Browse the available EC2 instances in the connected region. Select the workload instances to protect (not the VSA/access node itself ‚Äî that has no Commvault agent and acts as the proxy only).</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Assign a Plan (Storage Policy)</strong>
            <p>Select a backup plan. The underlying cloud library in this plan should ideally be in the <strong>same AWS region as the workload EC2 instances</strong> ‚Äî sending backup data from cloud to an on-premises disk library is not a best practice for cloud workloads.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Name the VM Group and Save</strong>
            <p>Give the VM Group a descriptive name (e.g., <code>AWS-Prod-VMs</code>). Save the configuration. The VM Group is now ready for backup.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="callout best">
      <div class="callout-title">‚≠ê Best Practice ‚Äî Cloud Library for Cloud Workloads</div>
      <p>When backing up AWS EC2 instances, the backup destination (disk library) should be in the <strong>same AWS cloud region</strong>. Using an on-premises disk library as the target for cloud workloads creates unnecessary cross-environment data transfer, introduces latency, and creates a dependency on WAN connectivity during the backup window.</p>
    </div>
  </div>

  <div class="card">
    <h3>Running an EC2 Backup Job</h3>
    <p>Trigger a manual backup from the VM Group by clicking <strong>Back Up Now</strong>. Monitor the job from the Job Controller. Key details visible during the job:</p>
    <div class="strip-row">
      <span class="strip-label">Transport Mode</span>
      <span class="strip-val"><strong>EBS Direct</strong> (default for EC2 backups) ‚Äî reads data directly from EBS snapshots without mounting</span>
      <span class="strip-badge sb-info">Check in Job Details</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Agent (VSA Node)</span>
      <span class="strip-val">Shows which Access Node is being used for the backup ‚Äî confirms the correct VSA is processing the job</span>
      <span class="strip-badge sb-info">Job Details</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">VM Size vs Application Size</span>
      <span class="strip-val">VM size is the total allocated disk (e.g., 8 GB). Application size is actual used data (e.g., 1.5 GB). Only used data is transferred.</span>
      <span class="strip-badge sb-ok">Expected Difference</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Agentless Verification</span>
      <span class="strip-val">Confirm the workload EC2 instance has no Commvault agent installed ‚Äî <code>commvault list</code> on that machine returns <em>command not found</em></span>
      <span class="strip-badge sb-ok">Agentless Confirmed</span>
    </div>
  </div>

  <div class="card">
    <h3>In-Place Restore ‚Äî EC2 Instance</h3>
    <p>In-place restore overwrites the existing EC2 instance with backup data. This is used when the VM has been corrupted, data has been accidentally deleted, or the OS has been corrupted. The following scenario demonstrates restoring from a case where the root partition files were accidentally deleted.</p>

    <div class="flow">
      <div class="flow-title">In-Place EC2 Instance Restore Procedure</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Navigate to Virtualization ‚Üí VM Group ‚Üí Select Instance</strong>
            <p>In Command Center: <strong>Protect ‚Üí Virtualization</strong>, select the VM Group, then select the specific EC2 instance to restore.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Select Restore Type: Full Instance ‚Üí In-Place</strong>
            <p>Choose <strong>Full Instance</strong> restore. Select <strong>In-Place</strong> as the destination ‚Äî this overwrites the existing VM at the same location.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Select a Restore Point and Configure Options</strong>
            <p>Choose the backup point to restore from. Enable <strong>Power On after Restore</strong> and select <strong>Unconditionally Overwrite</strong>. Read the warning carefully before confirming ‚Äî this is a destructive operation that replaces the current VM.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Handle LVM Metadata Daemon Error (if encountered)</strong>
            <p>If restore fails with <em>"LVM metadata daemon is enabled on proxy ‚Äî it should be disabled"</em>, modify the LVM config file on the VSA proxy node. This change is safe only on a dedicated Commvault proxy ‚Äî never apply this on a customer application server.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash ‚Äî fix LVM metadata daemon on VSA proxy (proxy node only)</span><div class="code-dots"><div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div></div></div>
              <div class="code-body"><span class="comment"># Connect to the VSA proxy EC2 instance (NOT the workload VM)</span>
<span class="comment"># Edit the LVM configuration file</span>
<span class="cmd">sudo vi</span> /etc/lvm/lvm.conf

<span class="comment"># Find: use_lvmetad = 1  ‚Üí  Change to: use_lvmetad = 0</span>
<span class="comment"># Save and reboot the proxy node</span>
<span class="cmd">sudo reboot</span>

<span class="comment"># After reboot: resubmit the restore job from Commvault</span></div>
            </div>
            <div class="callout warn">
              <div class="callout-title">‚ö† Proxy Node Only ‚Äî Never on Customer Machines</div>
              <p>The LVM config modification is safe only on a dedicated Commvault VSA proxy node where no other applications run. If the VSA is shared with customer workloads, do not apply this change ‚Äî escalate to the Linux admin and open a Commvault support case instead.</p>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">5</div>
          <div class="flow-content">
            <strong>Verify Restore</strong>
            <p>After the restore job completes (100%), connect to the restored EC2 instance via SSH using its public IP. Verify that files and directories that existed at backup time are present, and that the OS is functional.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 7: S3 OVERVIEW ============================= -->
<section id="s3-overview" class="section">
  <div class="section-header">
    <div class="section-icon icon-blue">ü™£</div>
    <div>
      <div class="section-title">Amazon S3 Backup ‚Äî Overview &amp; Architecture</div>
      <div class="section-subtitle">Object storage protection using the Commvault Cloud Apps agent</div>
    </div>
  </div>

  <div class="card">
    <h3>What is Amazon S3?</h3>
    <p>Amazon S3 (Simple Storage Service) is AWS's <strong>object storage</strong> platform. It is used for storing files, videos, audio, images, and unstructured data ‚Äî not databases or applications. You cannot install databases or applications on S3; it is pure object/file storage.</p>
    <p>Commvault protects S3 (and other object storage types like Azure Blob, Google Cloud Storage, Amazon EFS, FSx) using a common agent called <strong>Cloud Apps</strong>. This is a different agent from the Virtual Server Agent (VSA) used for EC2 VM backups ‚Äî though they can be installed on the same proxy server.</p>

    <div class="strip-row">
      <span class="strip-label">Amazon EFS</span>
      <span class="strip-val">Elastic File System ‚Äî NFS-based shared file storage. Protected by Cloud Apps agent.</span>
      <span class="strip-badge sb-info">Cloud Apps</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Amazon FSx</span>
      <span class="strip-val">Managed file storage (Windows or Lustre-based). Protected by Cloud Apps agent.</span>
      <span class="strip-badge sb-info">Cloud Apps</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Amazon S3</span>
      <span class="strip-val">Object storage for files, media, and unstructured data. Protected by Cloud Apps agent.</span>
      <span class="strip-badge sb-info">Cloud Apps</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Azure Blob Storage</span>
      <span class="strip-val">Microsoft Azure's object storage equivalent to S3. Also protected by Cloud Apps.</span>
      <span class="strip-badge sb-info">Cloud Apps</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Google Cloud Storage</span>
      <span class="strip-val">GCP's object storage. Also protected by Cloud Apps agent.</span>
      <span class="strip-badge sb-info">Cloud Apps</span>
    </div>
  </div>

  <div class="card">
    <h3>S3 Backup ‚Äî High-Level Architecture</h3>
    <div class="arch-row">
      <div class="arch-box abox-blue">Amazon S3 Bucket<small>Source data to protect</small></div>
      <div class="arch-connector">‚Üí</div>
      <div class="arch-box abox-purple">Proxy Client (EC2)<small>Cloud Apps package installed<br>Reads S3 bucket data</small></div>
      <div class="arch-connector">‚Üí</div>
      <div class="arch-box abox-gold">Cloud Library<small>Backup destination<br>(e.g., another S3 bucket)</small></div>
    </div>
    <div class="arch-connector">‚Üï</div>
    <div class="arch-row">
      <div class="arch-box abox-blue">CommServe<small>Job orchestration</small></div>
      <div class="arch-connector">‚Üî</div>
      <div class="arch-box abox-green">Media Agent<small>Index Cache + DDB<br>(metadata only if Storage Accelerator enabled)</small></div>
    </div>

    <div class="callout note">
      <div class="callout-title">üìò Storage Accelerator for S3 Backup</div>
      <p>The same Storage Accelerator principle applies to S3 backups. With Storage Accelerator installed on the proxy client, data flows directly from the proxy to the cloud library ‚Äî bypassing the Media Agent. This is especially important when the CommServe/Media Agent is on-premises: without Storage Accelerator, S3 data would travel from AWS cloud ‚Üí on-premises MA ‚Üí back to AWS cloud library, creating unnecessary round-trips and bandwidth consumption.</p>
    </div>

    <h4>4 High-Level Steps for S3 Backup Configuration</h4>
    <div class="hflow">
      <div class="hflow-box active">Step 1<small>Review system requirements for proxy client</small></div>
      <div class="hflow-arrow">‚Üí</div>
      <div class="hflow-box active">Step 2<small>Deploy proxy client + install Cloud Apps package</small></div>
      <div class="hflow-arrow">‚Üí</div>
      <div class="hflow-box active">Step 3<small>Create S3 Virtual Client in Commvault</small></div>
      <div class="hflow-arrow">‚Üí</div>
      <div class="hflow-box active">Step 4<small>Configure subclient + run backup/restore</small></div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 8: S3 CONFIGURATION ============================= -->
<section id="s3-config" class="section">
  <div class="section-header">
    <div class="section-icon icon-purple">‚öô</div>
    <div>
      <div class="section-title">S3 Backup Configuration ‚Äî Step-by-Step</div>
      <div class="section-subtitle">Proxy client deployment, package installation, IAM credentials, and S3 Virtual Client setup</div>
    </div>
  </div>

  <div class="card">
    <h3>Step 1 &amp; 2: Deploy Proxy Client and Install Packages</h3>
    <p>For S3 backup, deploy a separate EC2 instance to act as the <strong>proxy client</strong>. This can be a Windows or Linux machine. In this walkthrough, Windows is used.</p>

    <div class="flow">
      <div class="flow-title">Windows Proxy Client Setup for S3 Backup</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Launch Windows EC2 Instance (free-tier eligible)</strong>
            <p>In AWS Console, launch an EC2 instance with a Windows Server AMI (2016/2019/2022 ‚Äî check Commvault documentation for supported versions). Free-tier eligible Windows instances are available. Allocate at least 50 GB root disk.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Retrieve Windows Administrator Password</strong>
            <p>In the AWS Console: <strong>EC2 ‚Üí Select Instance ‚Üí Actions ‚Üí Security ‚Üí Get Windows Password</strong>. Wait 4+ minutes after launch, then upload the PEM key file downloaded during instance creation. AWS decrypts and displays the administrator password. Use this with RDP to connect via the instance's Public IP.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Open Required Inbound Ports</strong>
            <p>In the instance's Security Group, allow these inbound rules:</p>
            <div class="status-row">
              <span class="status-pill sp-yellow">Ports 135, 139, 445 ‚Äî Temporary (for package push only)</span>
              <span class="status-pill sp-blue">Ports 8400, 8403 ‚Äî Permanent (Commvault)</span>
              <span class="status-pill sp-blue">Port 3389 ‚Äî RDP</span>
            </div>
            <p style="font-size:13px; color:var(--text-muted); margin-top:8px">Ports 135, 139, and 445 are only required during the initial Commvault package push. Remove these rules after installation is complete.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Disable Windows Firewall (temporarily for package push)</strong>
            <p>If the Commvault package installation fails despite open security group rules, check the Windows Defender Firewall inside the EC2 instance. Temporarily disable the Domain, Private, and Public network firewalls during installation. Re-enable after packages are successfully installed.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">5</div>
          <div class="flow-content">
            <strong>Push Packages from CommServe</strong>
            <p>In CommCell Console: <strong>Tools ‚Üí Add/Remove Software ‚Üí Install Software ‚Üí Windows</strong>. Enter the Public IP of the Windows EC2 proxy, credentials (Administrator + decrypted password), and select the following packages:</p>
            <div class="status-row">
              <span class="status-pill sp-green">‚úì File System</span>
              <span class="status-pill sp-green">‚úì File System Core</span>
              <span class="status-pill sp-green">‚úì Cloud Apps (under Applications section)</span>
              <span class="status-pill sp-green">‚úì Storage Accelerator</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Step 3: Create IAM Credentials for S3 Access</h3>
    <p>The S3 Virtual Client in Commvault needs credentials to access the S3 bucket. Access Key + Secret Key authentication is commonly used for S3 backups.</p>

    <div class="flow">
      <div class="flow-title">Generate Access Key + Secret Key in AWS IAM</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Create an IAM User</strong>
            <p>In AWS IAM, create a new user dedicated to Commvault S3 backup access. This separation of concerns ensures Commvault's permissions can be managed and revoked independently.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Attach S3 Permissions</strong>
            <p>Two permission options exist. <strong>Option A</strong> (simpler): attach the <code>AmazonS3FullAccess</code> managed policy ‚Äî grants access to all S3 buckets in the account. <strong>Option B</strong> (more secure): create a custom inline policy with a JSON document restricting access to only the specific bucket being backed up.</p>
            <div class="callout note">
              <div class="callout-title">üìò Minimum Required Permission</div>
              <p>The Commvault S3 Virtual Client requires the <code>s3:ListAllMyBuckets</code> permission during initial connection. If this permission is missing, you will see: <em>"S3 client is not authorized to perform ListAllMyBuckets."</em> Ensure your custom policy includes this action.</p>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Generate Access Key</strong>
            <p>In IAM: <strong>Select User ‚Üí Security credentials ‚Üí Access keys ‚Üí Create access key ‚Üí Application running outside AWS</strong>. The Access Key ID and Secret Access Key are shown <strong>only once</strong>. Download the CSV file immediately ‚Äî the secret key cannot be retrieved again. Store it securely.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="callout warn">
      <div class="callout-title">‚ö† Secret Access Key ‚Äî One-Time Display Only</div>
      <p>The AWS Secret Access Key is displayed only at the moment of creation. If you navigate away without saving it, you must delete the key and create a new one. Always download the CSV file containing both keys immediately, and store it securely. Never paste secret keys in plain text in tickets, chat, or emails.</p>
    </div>
  </div>

  <div class="card">
    <h3>Step 4: Create the S3 Virtual Client in Commvault</h3>
    <p>An S3 Virtual Client is a special Commvault client type that represents the S3 bucket(s) to be protected. It is configured in the CommCell Console (not Command Center).</p>
    <div class="flow">
      <div class="flow-title">S3 Virtual Client Configuration</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Navigate to New Client ‚Üí Cloud Storage ‚Üí Amazon S3</strong>
            <p>In CommCell Console: <strong>Client Computers (right-click) ‚Üí New Client ‚Üí Cloud Storage ‚Üí Amazon S3</strong>.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Provide Client Details</strong>
            <p>Enter a client name (user-defined, e.g., <code>S3-Virtual-Client</code>), instance name, and select the storage plan. In the <strong>Access Node</strong> field, select the Windows EC2 proxy deployed in the earlier steps.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Set Connection Details and Authentication</strong>
            <p>Go to the <strong>Connection Details</strong> tab. The default URL for AWS S3 is <code>s3.amazonaws.com</code>. Select <strong>Access Key</strong> as the authentication type. Create a new credential entry using the Access Key ID and Secret Access Key generated from IAM. Click OK.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">S3 Virtual Client ‚Äî Connection Details</span><div class="code-dots"><div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div></div></div>
              <div class="code-body">Endpoint URL   : s3.amazonaws.com
Auth Type      : Access Key
Access Key ID  : AKIA...  (from IAM - Access Key)
Secret Key     : xxxxxxxx  (from IAM - Secret Access Key)
Credential Name: (user-defined name for this credential entry)</div>
            </div>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Save and Verify Connection</strong>
            <p>Click OK/Save. If the credentials are correct and permissions are sufficient, Commvault connects to the S3 endpoint. A successful connection allows browsing available buckets in the next step.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Step 5: Configure Subclient Content (Select Buckets)</h3>
    <p>After the S3 Virtual Client is created, navigate to it in CommCell Console and configure the default subclient's content to define which buckets to protect.</p>
    <div class="flow">
      <div class="flow-title">Subclient Content Configuration</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Navigate to S3 Virtual Client ‚Üí Cloud Apps ‚Üí Default Subclient ‚Üí Properties</strong>
            <p>In the CommCell Console client tree, expand the S3 Virtual Client, then <strong>Cloud Apps</strong>, right-click <strong>Default Subclient ‚Üí Properties</strong>.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Go to Content Tab ‚Üí Browse</strong>
            <p>In the subclient properties, go to the <strong>Content</strong> tab and click <strong>Browse</strong>. Commvault connects to S3 and discovers all buckets in the configured region. All available buckets are listed.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Select the Target Bucket(s)</strong>
            <p>Select the specific bucket(s) to back up. The <code>/</code> (slash) entry represents all buckets ‚Äî avoid this for granular control. Select only the bucket(s) you want to protect (e.g., <code>customer-data-2024</code>). Save the subclient properties.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 9: S3 BACKUP & RESTORE ============================= -->
<section id="s3-backup-restore" class="section">
  <div class="section-header">
    <div class="section-icon icon-green">‚òÅ</div>
    <div>
      <div class="section-title">S3 Backup &amp; Restore ‚Äî Execution and Verification</div>
      <div class="section-subtitle">Running full backups, in-place object restore, and verifying data integrity</div>
    </div>
  </div>

  <div class="card">
    <h3>Running the S3 Backup</h3>
    <p>With subclient content configured, initiate a manual backup. Before running, ensure there is at least one object (file) in the S3 bucket ‚Äî Commvault cannot back up an empty bucket meaningfully.</p>
    <div class="strip-row">
      <span class="strip-label">Upload Test File First</span>
      <span class="strip-val">Go to the AWS Console ‚Üí S3 ‚Üí Select bucket ‚Üí Upload at least one file before running the first backup</span>
      <span class="strip-badge sb-warn">Required for Meaningful Backup</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Initiate Backup</span>
      <span class="strip-val">Right-click the default subclient ‚Üí Backup ‚Üí Full ‚Üí Run. Monitor from the Job Controller.</span>
      <span class="strip-badge sb-ok">Standard Process</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Data Flow</span>
      <span class="strip-val">S3 Bucket ‚Üí Proxy Client (Cloud Apps) ‚Üí Storage Accelerator ‚Üí Cloud Library (direct). Media Agent only receives metadata.</span>
      <span class="strip-badge sb-ok">With Storage Accelerator</span>
    </div>
    <div class="strip-row">
      <span class="strip-label">Timing Note</span>
      <span class="strip-val">Objects uploaded <em>after</em> a backup job starts are not captured in that job. Upload files before initiating backup to ensure they are included.</span>
      <span class="strip-badge sb-info">Important</span>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° Why Storage Accelerator Matters for S3 Backup</div>
      <p>If your CommServe and Media Agent are on-premises, and your proxy client and S3 bucket are in AWS, without Storage Accelerator the data path would be: <strong>S3 bucket ‚Üí proxy (AWS) ‚Üí Media Agent (on-prem) ‚Üí Cloud library (AWS)</strong> ‚Äî data crosses the internet twice. With Storage Accelerator: <strong>S3 bucket ‚Üí proxy (AWS) ‚Üí Cloud library (AWS)</strong> ‚Äî data stays entirely within AWS, dramatically faster and cheaper.</p>
    </div>
  </div>

  <div class="card">
    <h3>In-Place Restore ‚Äî S3 Object(s)</h3>
    <p>To restore S3 objects back to their original bucket location:</p>
    <div class="flow">
      <div class="flow-title">S3 In-Place Restore Procedure</div>
      <div class="flow-steps">
        <div class="flow-step">
          <div class="flow-num">1</div>
          <div class="flow-content">
            <strong>Simulate Data Loss (for testing)</strong>
            <p>In the AWS S3 Console, delete the object(s) from the bucket that were included in the backup. Confirm the bucket is now empty or missing the target files.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">2</div>
          <div class="flow-content">
            <strong>Navigate to Subclient ‚Üí Browse and Restore</strong>
            <p>In CommCell Console, right-click the default subclient ‚Üí <strong>Browse and Restore</strong>. Select the latest full backup point. Browse the bucket contents ‚Äî the deleted objects should be visible in the backup.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">3</div>
          <div class="flow-content">
            <strong>Select Objects and Restore In-Place</strong>
            <p>Select the file(s) or folder(s) to restore. Choose <strong>In-Place Restore</strong> with <strong>Overwrite existing files</strong> enabled. Confirm and submit the restore job.</p>
          </div>
        </div>
        <div class="flow-step">
          <div class="flow-num">4</div>
          <div class="flow-content">
            <strong>Verify in AWS S3 Console</strong>
            <p>After the restore job completes, go to the AWS S3 Console, navigate to the bucket, and refresh. The restored objects should reappear in the bucket, confirming successful restore.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ============================= SECTION 10: INTERVIEW Q&A ============================= -->
<section id="interview" class="section">
  <div class="section-header">
    <div class="section-icon icon-purple">üéì</div>
    <div>
      <div class="section-title">Interview &amp; Exam ‚Äî Scenario-Based Q&amp;A</div>
      <div class="section-subtitle">Real-world questions covering AirGap Protect, AWS EC2 backup, and S3 protection</div>
    </div>
  </div>

  <div class="qa-block">
    <div class="qa-q">A customer wants a secondary copy of their backups that is completely immune to ransomware ‚Äî even if their entire on-premises network is encrypted, the backups should be recoverable. What Commvault solution do you recommend and why?</div>
    <div class="qa-a">Recommend <strong>Commvault AirGap Protect Storage</strong>. It is Commvault-managed, immutable cloud storage that is physically disconnected from the customer's network when no backup or aux copy job is running. Unlike a standard S3 or Azure Blob cloud library (which is always accessible via network), AirGap Protect only establishes a connection during active jobs ‚Äî making it unreachable to ransomware that may have compromised the on-premises network. Data written to AirGap Protect cannot be deleted without an auth code from Commvault Technical Support, ensuring immutability. The customer selects a license (sized in TB), chooses a region (Azure or OCI), and Commvault provisions and manages the storage entirely.</div>
  </div>

  <div class="qa-block">
    <div class="qa-q">You are configuring AWS EC2 backup in Commvault. The customer asks: "Where should the access node (VSA) be deployed ‚Äî on-prem or in the AWS cloud?" How do you advise?</div>
    <div class="qa-a">The access node must be deployed <strong>in the AWS cloud</strong>. While it is technically possible to place it in a different region or even on-premises in some hybrid cases, the strong recommendation and best practice is to deploy the VSA in the same AWS cloud environment as the workload EC2 instances ‚Äî ideally in the <strong>same region</strong>. This eliminates cross-environment latency, keeps backup data within AWS (especially when using a cloud library in the same region), and maximizes throughput. Placing the access node on-premises when workloads are in AWS forces all backup traffic to traverse the internet ‚Äî degrading performance significantly.</div>
  </div>

  <div class="qa-block">
    <div class="qa-q">What is the "hypervisor" in the context of Commvault AWS EC2 backups, and how is it different from VMware?</div>
    <div class="qa-a">In VMware, the hypervisor is a physical vCenter server or ESX host ‚Äî a real machine with an IP address that Commvault connects to. In AWS, there is no equivalent physical hypervisor machine. Instead, the <strong>AWS Account itself serves as the hypervisor</strong> in Commvault's configuration. The account can be authenticated in three ways: <strong>IAM Role</strong> (attached to the access node EC2 instance ‚Äî recommended, most secure), <strong>Access Key + Secret Key</strong> (long-lived credentials from an IAM user), or <strong>STS Assume Role</strong> (cross-account access using AWS Security Token Service). The Commvault hypervisor configuration for AWS is done via Command Center: Protect ‚Üí Virtualization ‚Üí Add Hypervisor ‚Üí Amazon Web Services.</div>
  </div>

  <div class="qa-block">
    <div class="qa-q">What is the Storage Accelerator, and why is it especially important for cloud-based backup workloads?</div>
    <div class="qa-a">The Storage Accelerator is a Commvault package installed on the VSA (access node) that allows the VSA to write backup data <strong>directly to the cloud library</strong>, bypassing the Media Agent entirely for the data transfer path. Without it, the standard 2-hop path requires: VSA ‚Üí Media Agent ‚Üí Cloud Library. With Storage Accelerator, the path becomes: VSA ‚Üí Cloud Library (1 hop). The Media Agent still receives metadata after the data transfer completes ‚Äî it is not eliminated from the architecture, only from the data path. This is especially critical for cloud workloads because the Media Agent may be on-premises while the VSA and cloud library are both in the cloud ‚Äî Storage Accelerator keeps all data traffic within the cloud environment, avoiding expensive and slow internet round-trips. Prerequisite: the VSA must have direct network connectivity to the cloud library.</div>
  </div>

  <div class="qa-block">
    <div class="qa-q">During an AWS EC2 backup configuration, you encounter the error "mono framework is not initialized" when trying to configure the hypervisor. What is the cause and fix?</div>
    <div class="qa-a">This error occurs because the <strong>Mono framework is not installed</strong> on the VSA EC2 instance. Commvault's VSA agent requires Mono for certain operations. If the VSA is running <strong>Amazon Linux 2023</strong>, Mono is not available in its default dnf repository and cannot be installed ‚Äî making Amazon Linux 2023 effectively incompatible with Commvault VSA despite being listed in the documentation. The fix is to <strong>terminate the Amazon Linux 2023 instance and redeploy using Amazon Linux 2 AMI</strong>. On Amazon Linux 2, install Mono using: <code>sudo amazon-linux-extras install mono -y</code>. This is a documentation deficiency on Commvault's part ‚Äî Amazon Linux 2 is the safe, tested, and recommended distribution.</div>
  </div>

  <div class="qa-block">
    <div class="qa-q">What Commvault agent is used to back up Amazon S3 buckets, and how does it differ from the EC2 backup agent?</div>
    <div class="qa-a">Amazon S3 (and other cloud object storage types ‚Äî Azure Blob, Google Cloud Storage, Amazon EFS, FSx) are protected using the <strong>Cloud Apps agent</strong>, not the Virtual Server Agent (VSA). While both agents can be installed on the same proxy EC2 instance, they serve distinct purposes. The VSA performs agentless EC2 virtual machine backups (snapshot-based). The Cloud Apps agent performs object-level backups of storage buckets ‚Äî treating S3 bucket contents as files to be backed up and restored. For S3 backup, you create an <strong>S3 Virtual Client</strong> in the CommCell Console, configure authentication (Access Key + Secret Key is common), and select specific buckets as subclient content. The File System and File System Core packages are also required on the proxy alongside the Cloud Apps package.</div>
  </div>

  <div class="qa-block">
    <div class="qa-q">A customer's AirGap Protect library is showing offline in the console. Walk through your troubleshooting approach.</div>
    <div class="qa-a">First, open the <strong>Cloud Test Tool</strong> on the Windows Media Agent that is configured to connect to the AirGap Protect storage. Run the tool, select <strong>Option 2 (AirGap Protect)</strong>, and authenticate with Commvault CommServe credentials (the tool fetches stored credentials from the CommServe database ‚Äî no access keys needed). Then run the <strong>Access Functionality Check (Option 1)</strong> ‚Äî this tests whether the MA can establish a connection to the AirGap endpoint. If connectivity fails, run <code>cvping</code> (or Telnet) from the CommServe and Media Agent to the AirGap endpoint URLs on port 4434 to isolate whether the issue is a network/firewall problem. If connectivity is confirmed but the library is still offline, escalate to Commvault Technical Support with the Cloud Test Tool output logs.</div>
  </div>

  <div class="qa-block">
    <div class="qa-q">During an EC2 in-place restore, you receive the error "LVM metadata daemon is enabled on proxy ‚Äî it should be disabled." How do you resolve this?</div>
    <div class="qa-a">This error occurs because the LVM metadata daemon (<code>lvmetad</code>) is enabled on the VSA proxy node, which conflicts with Commvault's restore process. The fix requires modifying the LVM configuration file on the <strong>VSA proxy EC2 instance</strong> (not the workload VM being restored). Open <code>/etc/lvm/lvm.conf</code>, find the line <code>use_lvmetad = 1</code>, and change it to <code>use_lvmetad = 0</code>. Save the file and reboot the proxy node. After reboot, resubmit the restore job. Important caveat: this change is safe <strong>only on a dedicated Commvault VSA proxy node</strong> where no other application workloads run. If the proxy machine is shared with customer applications, do not make this change without involving the Linux administrator and opening a Commvault support case.</div>
  </div>
</section>

</div><!-- end main-content -->

<!-- AUTHOR SECTION -->
<div class="author-section">
  <div class="author-title">About the Author</div>
  <div class="author-card">
    <div class="author-avatar">üë®‚Äçüíª</div>
    <div class="author-info">
      <div class="author-name">Mohammed Abdul</div>
      <div class="author-role">Data Protection Architect ¬∑ 15+ Years Experience</div>
      <div class="author-bio">Seasoned Data Protection Architect with over 15 years of hands-on experience designing, implementing, and troubleshooting enterprise backup and recovery solutions. Deep expertise in Commvault administration across on-premises, hybrid, and cloud environments ‚Äî including AWS, Azure, and GCP cloud workload protection. Specialist in cloud backup architecture, AirGap Protect deployments, and large-scale Commvault infrastructure.</div>
      <div class="badge-row">
        <span class="badge cv">Commvault Certified</span>
        <span class="badge veeam">Veeam VMCE</span>
        <span class="badge nb">NetBackup</span>
        <span class="badge netapp">NetApp</span>
      </div>
      <a class="contact-card" href="/cdn-cgi/l/email-protection#7d1c1f190811531019534f4d4d4d4d4c4d4f3d1a101c1411531e1210">
        ‚úâ <span class="__cf_email__" data-cfemail="20414244554c0e4d440e121010101011101260474d41494c0e434f4d">[email&#160;protected]</span>
      </a>
    </div>
  </div>
  <div class="disclaimer">
    <p><strong>Disclaimer:</strong> This tutorial is created for educational and training purposes only. All technical procedures, commands, and configurations are based on real-world Commvault implementation experience. Always refer to the official Commvault documentation for your specific software version before applying any changes in a production environment. AWS console UI and IAM features may vary ‚Äî consult AWS official documentation for the latest interface guidance.</p>
  </div>
</div>

<footer>
  Commvault Software Administration ‚Äî Tutorial 8: Cloud Backup &amp; Restore ¬∑ AirGap Protect, AWS EC2 &amp; S3
  <p style="margin-top:6px; color:var(--text-dim);">¬© Mohammed Abdul ¬∑ Data Protection Architect ¬∑ For educational use only</p>
</footer>
</body>
</html>